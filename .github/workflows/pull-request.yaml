name: Lint and Build
on:
  push

jobs:
    build:
        name: Build VRChat OBS Control
        runs-on: ubuntu-latest
        steps:
          - name: Checkout
            uses: actions/checkout@v3

          - name: Prepare binary folder
            run: |
              mkdir bin/

          - name: Setup Go
            uses: actions/setup-go@v3
            with:
              go-version: '1.18'
            
          - name: Build Windows Binary
            run: 'GOOS=windows GOARCH=amd64 go build -o bin/vrchat-obs-control-win64.exe .'

          - name: Compress 
            run: 'tar -cvf vrc-obs.tar bin'

          - name: Upload artifacts
            uses: actions/upload-artifact@v2
            with:
              name: vrc-obs
              path: vrc-obs.tar